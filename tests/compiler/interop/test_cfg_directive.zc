// Test @cfg() with //> define: build directive
//> define: SELF_DEFINED_FLAG

@cfg(SELF_DEFINED_FLAG)
fn get_mode() -> char* {
    return "Self-defined mode";
}

@cfg(not(SELF_DEFINED_FLAG))
fn get_mode() -> char* {
    return "Fallback mode";
}

fn main() {
    let mode = get_mode();
    assert(mode[0] == 'S', "Expected 'Self-defined mode'");
    println f"Mode: {mode}";
    println "build directive cfg test passed";
}
